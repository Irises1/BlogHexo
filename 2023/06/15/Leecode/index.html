<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Leecode算法题岛屿问题需要熟悉网格类问题的DFS： 1234567891011121314151617181920212223&#x2F;&#x2F;先看熟悉的树的dfspublic void treeDfs(TreeNode root)&amp;#123;    &#x2F;&#x2F;结束遍历的条件	if(root &#x3D;&#x3D; null) return;    dfs(root.left);    dfs(root.right);&amp;#125">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2023/06/15/Leecode/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Leecode算法题岛屿问题需要熟悉网格类问题的DFS： 1234567891011121314151617181920212223&#x2F;&#x2F;先看熟悉的树的dfspublic void treeDfs(TreeNode root)&amp;#123;    &#x2F;&#x2F;结束遍历的条件	if(root &#x3D;&#x3D; null) return;    dfs(root.left);    dfs(root.right);&amp;#125">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230530210711808.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230530212512858.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230404194318064.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230404201021061.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230405133802667.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230405145341203.png">
<meta property="og:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230524212130639.png">
<meta property="article:published_time" content="2023-06-15T12:12:02.372Z">
<meta property="article:modified_time" content="2023-05-30T14:00:43.412Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230530210711808.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Leecode" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/15/Leecode/" class="article-date">
  <time class="dt-published" datetime="2023-06-15T12:12:02.372Z" itemprop="datePublished">2023-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Leecode算法题"><a href="#Leecode算法题" class="headerlink" title="Leecode算法题"></a>Leecode算法题</h1><h2 id="岛屿问题"><a href="#岛屿问题" class="headerlink" title="岛屿问题"></a>岛屿问题</h2><p>需要熟悉网格类问题的DFS：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先看熟悉的树的dfs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">treeDfs</span><span class="params">(TreeNode root)</span>&#123;</span><br><span class="line">    <span class="comment">//结束遍历的条件</span></span><br><span class="line">	<span class="keyword">if</span>(root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    dfs(root.left);</span><br><span class="line">    dfs(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">    <span class="comment">//同样节点不在网格中结束遍历</span></span><br><span class="line">    <span class="keyword">if</span>(!inGrid(grid,r,c)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//如果遍历到的不是岛屿就返回</span></span><br><span class="line">    <span class="keyword">if</span>(grid[r][c] != <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//将访问过的岛屿置2防止重复访问</span></span><br><span class="line">    grid[r][c] = <span class="number">2</span>;</span><br><span class="line">    dfs(grid, r-<span class="number">1</span>, c);</span><br><span class="line">    dfs(grid, r+<span class="number">1</span>, c);</span><br><span class="line">    dfs(grid, r, c-<span class="number">1</span>);</span><br><span class="line">    dfs(grid, r, c+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">inGrid</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>&lt;=r &amp;&amp; r&lt;grid.length &amp;&amp; <span class="number">0</span>&lt;=c &amp;&amp; c&lt;grid[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Leecode695：岛屿最大面积（Medium）"><a href="#Leecode695：岛屿最大面积（Medium）" class="headerlink" title="Leecode695：岛屿最大面积（Medium）"></a>Leecode695：岛屿最大面积（Medium）</h3><p>遍历的时候遇到岛屿面积+1即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxAreaOfIsland</span><span class="params">(<span class="type">int</span>[][] grid)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                res = Math.max(res, dfs(grid,i,j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!inGrid(grid,r,c)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(grid[r][c] != <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    grid[r][c] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+dfs(grid,c-<span class="number">1</span>,r)+dfs(grid,c+<span class="number">1</span>,r)+dfs(grid,c,r-<span class="number">1</span>)+dfs(grid,c,r+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">boolean</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r&gt;=<span class="number">0</span> &amp;&amp; r&lt;grid.length &amp;&amp; c&gt;=<span class="number">0</span> &amp;&amp; c&lt;grid[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Leecode827：填海造岛（Hard）"><a href="#Leecode827：填海造岛（Hard）" class="headerlink" title="Leecode827：填海造岛（Hard）"></a>Leecode827：填海造岛（Hard）</h3><p>最大面积问题升级版，可以把一个海洋变成陆地，最大可以构造多大岛屿</p>
<p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230530210711808.png" alt="image-20230530210711808"></p>
<p>一个海洋格子跟两个不同的岛屿相邻，就可以得到改变之后的面积是两边的岛屿面积+1。用岛屿面积标记不同岛屿会出现重复，要用一个新的数组存放索引和面积，用索引标记岛屿。</p>
<p>这样需要第一遍dfs遍历岛屿并标记，第二遍遍历海洋，找到有两个不同岛屿相邻的海洋计算改造后的大小</p>
<h3 id="Leecode463：岛屿周长（Easy）"><a href="#Leecode463：岛屿周长（Easy）" class="headerlink" title="Leecode463：岛屿周长（Easy）"></a>Leecode463：岛屿周长（Easy）</h3><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230530212512858.png" alt="image-20230530212512858"></p>
<p>最好的方法不是dfs，但是可以用来练习dfs</p>
<p>当dfs遍历到超出grid的节点就说明走过了一条黄色的和网络边界相邻的边，走到海洋节点就说明走过了一条蓝色的和海洋格子相邻的边</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!inGrid(grid,r,c)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(grid[r][c] == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(grid[r][c] == <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    grid[r][c] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> dfs(grid, r - <span class="number">1</span>, c)</span><br><span class="line">        + dfs(grid, r + <span class="number">1</span>, c)</span><br><span class="line">        + dfs(grid, r, c - <span class="number">1</span>)</span><br><span class="line">        + dfs(grid, r, c + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Leecode200：岛屿数量"><a href="#Leecode200：岛屿数量" class="headerlink" title="Leecode200：岛屿数量"></a>Leecode200：岛屿数量</h3><p>统计岛屿的数量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numIslands</span><span class="params">(<span class="type">char</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;grid.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j&lt;grid[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                    res++;</span><br><span class="line">                    dfs(grid,i,j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">char</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!inGrid(grid, r, c)) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(grid[r][c] != <span class="string">&#x27;1&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">        grid[r][c] = <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">        dfs(grid,r-<span class="number">1</span>,c);</span><br><span class="line">        dfs(grid,r+<span class="number">1</span>,c);</span><br><span class="line">        dfs(grid,r,c-<span class="number">1</span>);</span><br><span class="line">        dfs(grid,r,c+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">inGrid</span><span class="params">(<span class="type">char</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> r&gt;=<span class="number">0</span> &amp;&amp; r&lt;grid.length &amp;&amp; c&gt;=<span class="number">0</span> &amp;&amp; c&lt;grid[<span class="number">0</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="Leecode-SQL题"><a href="#Leecode-SQL题" class="headerlink" title="Leecode SQL题"></a>Leecode SQL题</h1><h2 id="176-第二高的薪水"><a href="#176-第二高的薪水" class="headerlink" title="176.第二高的薪水"></a>176.第二高的薪水</h2><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230404194318064.png" alt="image-20230404194318064"></p>
<p>查询第二高薪水：</p>
<ul>
<li><p>按照薪水降序排序（Order By salary DESC）</p>
</li>
<li><p>不存在输出null</p>
<ul>
<li><p>使用<code>IFNULL</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    IFNULL(</span><br><span class="line">      (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">       <span class="keyword">FROM</span> Employee</span><br><span class="line">       <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">        LIMIT <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>),</span><br><span class="line">    <span class="keyword">NULL</span>) <span class="keyword">AS</span> SecondHighestSalary</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>(<code>IFNULL() </code>函数用于判断第一个表达式是否为 NULL，如果为 NULL 则返回第二个参数的值，如果不为 NULL 则返回第一个参数的值)</p>
<ul>
<li>重复值怎么办：DISTINCT关键字去重</li>
</ul>
<p>拓展到第N高的薪水</p>
<h2 id="177-第N高的薪水"><a href="#177-第N高的薪水" class="headerlink" title="177.第N高的薪水"></a>177.第N高的薪水</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="type">INT</span>) <span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">set</span> N <span class="operator">=</span> N<span class="number">-1</span>; </span><br><span class="line">  <span class="keyword">RETURN</span> (</span><br><span class="line">      # Write your MySQL query statement below.</span><br><span class="line">      <span class="keyword">select</span> IFNULL(</span><br><span class="line">          (<span class="keyword">select</span> <span class="keyword">distinct</span> salary</span><br><span class="line">          <span class="keyword">from</span> Employee</span><br><span class="line">          <span class="keyword">Order</span> <span class="keyword">By</span> salary <span class="keyword">DESC</span></span><br><span class="line">          Limit N,<span class="number">1</span>)</span><br><span class="line">          ,<span class="keyword">null</span>) <span class="keyword">as</span> getNthHighestSalary</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<ol>
<li>limit后的起始值和计数值都只接受整数</li>
<li>对函数中的变量改变，使用set</li>
</ol>
<h2 id="178-分数排名"><a href="#178-分数排名" class="headerlink" title="178.分数排名"></a>178.分数排名</h2><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230404201021061.png" alt="image-20230404201021061"></p>
<p><code>rank()</code>函数的使用</p>
<ul>
<li>rank() over (排序条件)：排名不一定连续（有两个第一名，就没有第二名，直接下一个第三名）</li>
<li>dense_rank() over (排序条件)：密集排名，排名连续（两个第一名，第三个人还是第二名）</li>
<li>row_number() over(排序条件)：没有并列，排名连续不重复</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> score, <span class="built_in">dense_rank</span>() <span class="keyword">over</span> (<span class="keyword">Order</span> <span class="keyword">By</span> score <span class="keyword">DESC</span>) `rank`</span><br><span class="line"><span class="keyword">from</span> Scores;</span><br></pre></td></tr></table></figure>

<h2 id="180-连续出现数字"><a href="#180-连续出现数字" class="headerlink" title="180.连续出现数字"></a>180.连续出现数字</h2><ol>
<li>连续出现</li>
<li>group by后的having</li>
</ol>
<h2 id="183-从不订购的客户"><a href="#183-从不订购的客户" class="headerlink" title="183.从不订购的客户"></a>183.从不订购的客户</h2><p>判断是否是<code>null</code>要使用<code>xx is Null</code>而不是<code>xx = Null</code></p>
<h2 id="184-部门工资最高员工"><a href="#184-部门工资最高员工" class="headerlink" title="184.部门工资最高员工"></a>184.部门工资最高员工</h2><p>分组在Employee中查出每个部门Id和最高的工资，然后用内连接连接两个表使用IN查询满足各个部门最高工资的条件。</p>
<h2 id="196-删除重复邮箱"><a href="#196-删除重复邮箱" class="headerlink" title="196.删除重复邮箱"></a>196.删除重复邮箱</h2><p>用person表选出最小id和email，连接到原始person表（原person左连接选出的），然后delete null的记录</p>
<h2 id="197-上升的气温（找比前一日温度高的日子）"><a href="#197-上升的气温（找比前一日温度高的日子）" class="headerlink" title="197.上升的气温（找比前一日温度高的日子）"></a>197.上升的气温（找比前一日温度高的日子）</h2><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230405133802667.png" alt="image-20230405133802667"></p>
<p>1.窗口函数LAG</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span></span><br><span class="line">  (<span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line">  <span class="built_in">LAG</span>(Temperature, <span class="number">1</span>) <span class="keyword">over</span>(<span class="keyword">Order</span> <span class="keyword">By</span> recordDate) <span class="keyword">As</span> yd </span><br><span class="line">  <span class="keyword">from</span> Weather) <span class="keyword">new</span></span><br><span class="line"><span class="keyword">where</span> new.yd <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">NULL</span> <span class="keyword">and</span> new.Temperature <span class="operator">&gt;</span> new.yd;</span><br></pre></td></tr></table></figure>

<p>按照日期排序，但是无法处理日期不连续时的问题</p>
<p>2.DATEDIFF</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> w2.id <span class="keyword">from</span></span><br><span class="line">  Weather w1, Weather w2</span><br><span class="line">  <span class="keyword">where</span> DATEDIFF(w2.recordDate, w1.recordDate) <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> w2.Temperature <span class="operator">&gt;</span> w1.Temperature</span><br><span class="line">;</span><br></pre></td></tr></table></figure>



<h2 id="511-游戏玩法分析"><a href="#511-游戏玩法分析" class="headerlink" title="511.游戏玩法分析"></a>511.游戏玩法分析</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#比较以下两种查询区别</span><br><span class="line">#<span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> player_id, <span class="built_in">MIN</span>(event_date) <span class="keyword">as</span> first_login </span><br><span class="line"><span class="keyword">from</span> Activity</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">By</span> player_id;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">Having</span>指定的是分组后显示的组的条件，无法对组里的条件进行约束</span><br><span class="line">#<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> player_id, event_date <span class="keyword">as</span> first_login </span><br><span class="line"><span class="keyword">from</span> Activity</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">By</span> player_id</span><br><span class="line"><span class="keyword">Having</span> event_date <span class="operator">=</span> <span class="built_in">MIN</span>(event_date);</span><br></pre></td></tr></table></figure>

<h2 id="550-游戏玩法分析IV"><a href="#550-游戏玩法分析IV" class="headerlink" title="550.游戏玩法分析IV"></a>550.游戏玩法分析IV</h2><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230405145341203.png" alt="image-20230405145341203"></p>
<p>查询首次登陆后连续登录两天的玩家数量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> Activity a <span class="keyword">Left</span> <span class="keyword">Join</span> </span><br><span class="line">(<span class="keyword">select</span> player_id, <span class="built_in">MIN</span>(event_date) <span class="keyword">As</span> first_login</span><br><span class="line"><span class="keyword">from</span> Activity</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">By</span> player_id) fl</span><br><span class="line"><span class="keyword">on</span> a.player_id <span class="operator">=</span> fl.player_id</span><br><span class="line"><span class="keyword">where</span> DATEDIFF(a.event_date, fl.first_login) <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>如何在这里除以玩家总数<code>select count(Distinct player_id)</code>，进一步要用round四舍五入<code>round(value,n)</code>，n为小数点后位数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> round(player_num.num<span class="operator">/</span><span class="built_in">count</span>(<span class="keyword">Distinct</span> player_id),<span class="number">2</span>) <span class="keyword">as</span> fraction </span><br><span class="line"><span class="keyword">from</span> Activity,</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> num</span><br><span class="line"><span class="keyword">from</span> Activity a <span class="keyword">Left</span> <span class="keyword">Join</span> </span><br><span class="line">(<span class="keyword">select</span> player_id, <span class="built_in">MIN</span>(event_date) <span class="keyword">As</span> first_login</span><br><span class="line"><span class="keyword">from</span> Activity</span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">By</span> player_id) fl</span><br><span class="line"><span class="keyword">on</span> a.player_id <span class="operator">=</span> fl.player_id</span><br><span class="line"><span class="keyword">where</span> DATEDIFF(a.event_date, fl.first_login) <span class="operator">=</span> <span class="number">1</span>) player_num</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>我自己的做法效率有点低</p>
<h2 id="584-寻找用户推荐人"><a href="#584-寻找用户推荐人" class="headerlink" title="584.寻找用户推荐人"></a>584.寻找用户推荐人</h2><p><img src="C:\Users\Bubble\AppData\Roaming\Typora\typora-user-images\image-20230524212130639.png" alt="image-20230524212130639"></p>
<p>很直观想到一个where判断 <code>referee_id != 2</code>，或者&lt;&gt;符号判断不等于。但是结果就输出了一个Zack，referee_id&#x3D;NULL的都没输出</p>
<p>因为MySQL使用三值逻辑，除了True和False以外还有UNKNOWN。任何和NULL比较都会变成与UNKNOWN比较，所以和NULL比较要用<code>IS NULL</code>和<code>IS NOT NULL</code>。所以对于可能有NULL值的字段要单独判断</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> customer <span class="keyword">WHERE</span> referee_id <span class="operator">&lt;&gt;</span> <span class="number">2</span> <span class="keyword">OR</span> referee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
























      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/06/15/Leecode/" data-id="clix3qjvi0003qwue2yuo76rl" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/06/15/Redis%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98-%E7%A9%BF%E9%80%8F%E9%9B%AA%E5%B4%A9%E5%87%BB%E7%A9%BF/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2023/06/15/JVM/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/15/sam%20related%20note/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/15/Sam%20on%20tooth/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/15/nnUNetv2%E7%AC%94%E8%AE%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/15/MedNeXt%20Transformer-driven%20Scaling%20of%20ConvNets%20for%20Medical%20Image%20Segmentation/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/15/%E5%BC%82%E4%BD%8D%E8%90%8C%E5%87%BA%E4%BB%BB%E5%8A%A1/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>